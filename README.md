# soketio_prac
soketio_prac

## 사용한 스택
html
javascript
node.js
## 사용한 라이브러리
express
socket.io

# 진행상황
### 11/23
socket.io를 활용한 채팅앱 만들기 연습

1. ai를 활용해 먼저 바이브 코딩으로 채팅 기능 구현
  - 각기 다른 브라우저 페이지에서 채팅을 입력하면 다른 브라우저 페이지에서도 내용이 표출되며 갱신되는 것을 확인
  - 어떤 브라우저 페이지에서 어떤 채팅을 입력했는지 표시되면 좋겠다는 생각이 들었음.
2. 채팅 페이지에 접속하기 전 닉네임 입력 페이지 추가
  - 채팅 페이지 접속 전에 닉네임을 입력하게 만듦
  - 채팅 페이지 접속 후, 채팅을 입력하면 앞서 '입력한 닉네임  입력한 내용' 과 같이 표시 됨.
3. 구현 된 내용이 어떤 식으로 구동 되는지 원리를 파악 하기
  3-1. prac 브랜치를 따로 생성해서 해당 브랜치에서 하나하나 손으로 쳐보면서 코딩 해보기
    - 어떤 코드가 어떤 역할을 하는지, 어떤 의도로 활용되었는지, 대체제가 있는지를 파악하면서 확인해보는 중.


### 11/24
새로운 아이디어 (최대인원 설정, 채팅을 입력한 시간 표기)가 떠올라 바이브 코딩으로 기능 구현

1. 전날 작업한 기능 + 최대인원 설정 기능 구현
  - 최대인원을 설정하고, 최대인원을 초과하는 브라우저 페이지 접속자가 접속을 시도하면 alert 창으로 정원이 초과되었습니다 표시
  - 접속자 수를 페이지 상단에 표기

2. 채팅을 입력한 시간을 표시 기능 구현
  - 닉네임 우측에 괄호를 두고 해당 괄호 안에 채팅을 입력한 시간이 표시되도록 기능을 구현함.

  ### 11/25
  새로운 아이디어 (오픈ai를 활용해서 만일 @챗봇 이라고 치고, 채팅을 입력하면 챗봇이 대답해주는 기능을 추가 하고 싶음)

1. google Genai 를 활용해서 챗봇 구현하기
  - npm install google/genai 를 통해 google/genai 모듈 설치
  - 모듈 설치는 됐는데, apikey를 dotenv를 활용해서 .env파일에서 불러오려고 하는데, 잘 불러와 지지 않는듯
  - 서버를 키고, 확인을 해보니 계속해서 챗봇 오류 발생. 

  ### 11/26

1. google Genai 를 연동시키는데 계속해서 문제가 생김.
  - 우선 응답요청을 받아야할 듯.
  - node_modules와 package-lock.json 파일을 삭제하고, 새로 최신버전의 라이브러리를 새로 설치
  - nodejs와 genai가 버전호환이 문제일 수 있다는 가능성 파악 -> nvm을 설치해서 관리 해보는 방향으로 진행 예정
  - 기존 로컬 nodejs는 공식페이지에서 설치 파일을 다운받아 설치, -> 기존 nodejs를 삭제후, brew로 nvm을 설치 후, nvm으로 lts버전의 nodejs를 설치했음.
  - 교체 후에도 안됨.
  - 공식문서에서 ES6방식을 사용하고 있어 commonJS방식의 모듈 지정을 ES6방식으로 수정
  - 아직도 안 됨.
  - 공식문서와 작성코드를 비교 
    -> 작성코드는 ai.generateContent로 작성되었으나, 공식문서에는 ai에 models가 추가 된 ai.models.generateContent 로 표기되어있음. 해당 코드로 변경하고 실행할 예정
  - genai라이브러리가 googleCloud 인증정보를 찾을 수 없어서 문제가 발생 함을 확인
    -> 인증정보라는 내용을 토대로 apikey가 들어가지 않아서 인가? 라는 생각을 해봄.
    const ai = new GoogleGenAI({}); 이 변수를 const ai = new GoogleGenAI({ apiKey: apiKey }); 로 변경 
  - 실행이 되는 것을 확인.

  ### 11/27
  챗봇 응답대기 시간을 줄이거나, 로딩중 표시 예정

1. @챗봇 뒤의 첫번째 글자를 인식하지 못하는 현상 발견
  - const query = msg.substring(5).trim(); 부분이 5로 되어있어서 총 5글자가 제외되는데, @챗봇 띄어쓰기 이후 첫번째 글자까지가 5번째라 4로 변경 -> 문제 해결 확인
2. 챗봇 응답대기 시간을 줄일 수 있는 방안을 모색
  - 실제 ai도 내용을 파악하고, 생각을 하는 시간이 필요하기 때문에, 응답시간을 줄이기 보다 응답하는 중... 글자 표시할 생각
  - index.html파일에 script코드를 수정.
  - 응답대기중... 으로 계속 있으니 심심해서 .의 갯수가 늘어나고 줄어들고 하게 만들 생각
  - 완료
  - @챗봇을 includes로 조건을 둬서, 내용에 @챗봇 이라는 내용이 존재하기만 하면 응답대기중... 이 계속 표시되는 버그 발견
  - includes를 startsWith로 조건 변경
  - 버그 해결